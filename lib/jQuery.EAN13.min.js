/* 
* Copyright (c) 2012 Johannes Mittendorfer (http://jmittendorfer.hostingsociety.com)
* Licensed under the MIT License (LICENSE.txt).
*
* Version: 0.1
*/

(function(g){g.fn.EAN13=function(b){for(var d="0001101 0011001 0010011 0111101 0100011 0110001 0101111 0111011 0110111 0001011".split(" "),a="0100111 0110011 0011011 0100001 0011101 0111001 0000101 0010001 0001001 0010111".split(" "),g="1110010 1100110 1101100 1000010 1011100 1001110 1010000 1000100 1001000 1110100".split(" "),e=this[0],i=e.height-0.1*e.height,c=e.width/95,f="",j="xxxxxx xxyxyy xxyyxy xxyyyx xyxxyy xyyxxy xyyyxx xyxyxy xyxyyx xyyxyx".split(" ")[parseInt(b.substr(0,1))].split(""), b=b.substr(1),h=b.split(""),b=0;6>b;b++)f="x"==j[b]?f+d[h[b]]:f+a[h[b]];for(b=6;12>b;b++)f+=g[h[b]];if(e.getContext){d=e.getContext("2d");d.fillStyle="rgb(0, 0, 0)";a=0;f=f.split("");d.fillRect(a,0,c,e.height);a+=2*c;d.fillRect(a,0,c,e.height);a+=c;for(b=0;42>b;b++)"1"==f[b]&&d.fillRect(a,0,c,i),a+=c;a+=c;d.fillRect(a,0,c,e.height);a+=2*c;d.fillRect(a,0,c,e.height);a+=2*c;for(b=42;84>b;b++)"1"==f[b]&&d.fillRect(a,0,c,i),a+=c;d.fillRect(a,0,c,e.height);d.fillRect(a+2*c,0,c,e.height)}else alert("jQuery.EAN13: error!")}})(jQuery);